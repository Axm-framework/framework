(()=>{var _=class{constructor(t,e=!1){this.el=t,this.skipWatcher=e,this.resolveCallback=()=>{},this.rejectCallback=()=>{},this.signature=(Math.random()+1).toString(36).substring(8)}toId(){return btoa(encodeURIComponent(this.el.outerHTML))}onResolve(t){this.resolveCallback=t}onReject(t){this.rejectCallback=t}resolve(t){this.resolveCallback(t)}reject(t){this.rejectCallback(t)}};var V=class extends _{constructor(t,e,r){super(r),this.type="fireEvent",this.payload={id:this.signature,event:t,params:e}}toId(){return btoa(encodeURIComponent(this.type,this.payload.event,JSON.stringify(this.payload.params)))}};function Ze(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}var me=class{constructor(){this.arrays=new WeakMap}add(e,r){this.arrays.has(e)||this.arrays.set(e,[]),this.arrays.get(e).push(r)}get(e){return this.arrays.has(e)?this.arrays.get(e):[]}each(e,r){return this.get(e).forEach(r)}},U=class{constructor(){this.listeners={}}register(e,r){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(r)}call(e,...r){(this.listeners[e]||[]).forEach(i=>{i(...r)})}has(e){return Object.keys(this.listeners).includes(e)}};function ge(t,e,r){var i;return function(){var n=this,s=arguments,o=function(){i=null,r||t.apply(n,s)},a=r&&!i;clearTimeout(i),i=setTimeout(o,e),a&&t.apply(n,s)}}function z(t){let e=document.createEvent("Events");return e.initEvent(t,!0,!0),document.dispatchEvent(e),e}function ke(t,e){let r=new Set,i=[t];for(;i.length;){let n=i.pop();if(!r.has(n)){if(r.add(n),e(n)===!1)return;i.push(...n.children)}}}function et(t){return typeof t=="function"}function X(t,e){return e===""?t:e.split(".").reduce((r,i)=>{if(r!==void 0)return r[i]},t)}function tt(t,e,r=window){try{if(typeof t!="string")throw new Error("The method provided is not a string");if(typeof r!="object")throw new Error("The context provided is not an object");let i=r[t];if(typeof i=="function")return i.call(r,...e);console.error(`The function '${t}' does not exist in the provided context.`)}catch(i){console.error(`An error occurred when calling the function '${t}':`,i)}}function xe(){if(document.querySelector('meta[name="csrf-token"]'))return document.querySelector('meta[name="csrf-token"]').getAttribute("content");if(document.querySelector("[data-csrf]"))return document.querySelector("[data-csrf]").getAttribute("data-csrf");if(window.raxmScriptConfig.csrf??!1)return window.raxmScriptConfig.csrf;throw"Raxm: No CSRF token detected"}function rt(t){return!!t.match(/<script>Sfdump\(".+"\)<\/script>/)}function it(t){let e=t.match(/.*<script>Sfdump\(".+"\)<\/script>/s);return[e,t.replace(e,"")]}var nt={availableHooks:["component.initialized","directive.initialized","element.initialized","element.updating","element.updated","element.removed","message.sent","message.failed","message.received","message.processed","interceptRaxmModelSetValue","interceptRaxmModelAttachListener","beforeReplaceState","beforePushState"],bus:new U,register(t,e){if(!this.availableHooks.includes(t))throw`Raxm: Referencing unknown hook: [${t}]`;this.bus.register(t,e)},call(t,...e){this.bus.call(t,...e)}};var D={componentsById:{},listeners:new U,initialRenderIsFinished:!1,raxmIsInBackground:!1,raxmIsOffline:!1,sessionHasExpired:!1,sessionHasExpiredCallback:void 0,hooks:nt,onErrorCallback:()=>{},components(){return Object.keys(this.componentsById).map(t=>this.componentsById[t])},addComponent(t){return this.componentsById[t.id]=t},findComponent(t){return this.componentsById[t]},getComponentsByName(t){return this.components().filter(e=>e.name===t)},hasComponent(t){return!!this.componentsById[t]},tearDownComponents(){this.components().forEach(t=>{this.removeComponent(t)})},on(t,e){this.listeners.register(t,e)},emit(t,...e){this.listeners.call(t,...e),this.componentsListeningForEvent(t).forEach(r=>r.addAction(new V(t,e)))},emitUp(t,e,...r){this.componentsListeningForEventThatAreTreeAncestors(t,e).forEach(i=>i.addAction(new V(e,r)))},emitSelf(t,e,...r){let i=this.findComponent(t);i.listeners.includes(e)&&i.addAction(new V(e,r))},emitTo(t,e,...r){this.getComponentsByName(t).forEach(n=>{n.listeners.includes(e)&&n.addAction(new V(e,r))})},componentsListeningForEventThatAreTreeAncestors(t,e){for(var r=[],i=t.parentElement.closest(`[${m}id]`);i;)r.push(i.getAttribute(`${m}id`)),i=i.parentElement.closest(`[${m}id]`);return this.components().filter(n=>n.listeners.includes(e)&&r.includes(n.id))},componentsListeningForEvent(t){return this.components().filter(e=>e.listeners.includes(t))},registerHook(t,e){this.hooks.register(t,e)},callHook(t,...e){this.hooks.call(t,...e)},changeComponentId(t,e){let r=t.id;t.id=e,t.fingerprint.id=e,this.componentsById[e]=t,delete this.componentsById[r],this.components().forEach(i=>{let n=i.serverMemo.children||{};Object.entries(n).forEach(([s,{id:o,tagName:a}])=>{o===r&&(n[s].id=e)})})},removeComponent(t){t.tearDown(),delete this.componentsById[t.id]},onError(t){this.onErrorCallback=t},getClosestParentId(t,e){let r={};e.forEach(s=>{let o=this.getDistanceToChild(s,t);o&&(r[s]=o)});let i=Math.min(...Object.values(r)),n;return Object.entries(r).forEach(([s,o])=>{o===i&&(n=s)}),n},closestComponent(t,e=!0){let r=t;for(;r;){if(r.__raxm)return r.__raxm;r=r.parentElement}if(e)throw new Error("Could not find Raxm component in DOM tree")},getDistanceToChild(t,e,r=1){let i=this.findComponent(t);if(!i)return;let n=i.childIds;if(n.includes(e))return r;for(let s=0;s<n.length;s++){let o=this.getDistanceToChild(n[s],e,r+1);if(o)return o}}},d=D;function st(t){return D.findComponent(t)}function ot(){return D.components()[0]}function at(t){return D.getComponentsByName(t).map(e=>e.$raxm)}function lt(){return D.components()}function dt(t,e){return D.on(t,e)}function ct(t,e){return D.registerHook(t,e)}function ut(t,e){return D.callHook(t,...e)}function ft(t,e=!0){return D.closestComponent(t,e)}var te="axm",m=te+"\\:",T=te+":";function cr(t){return t.match(new RegExp(m))}function ur(t,e){let[r,...i]=e.replace(new RegExp(m),"").split(".");return new Ce(r,i,e,t)}function b(t,e){d.registerHook("directive.initialized",({el:r,component:i,directive:n,cleanup:s})=>{n.type===t&&e({el:r,directive:n,component:i,cleanup:s})})}function E(t){return new Me(t)}var Me=class{constructor(e){this.el=e,this.directives=this.extractTypeModifiersAndValue()}all(){return this.directives}has(e){return this.directives.map(r=>r.type).includes(e)}missing(e){return!this.has(e)}get(e){return this.directives.find(r=>r.type===e)}extractTypeModifiersAndValue(){return Array.from(this.el.getAttributeNames().filter(e=>cr(e)).map(e=>ur(this.el,e)))}},Ce=class{constructor(e,r,i,n){this.rawName=this.raw=i,this.el=n,this.eventContext,this.type=e,this.modifiers=r,this.expression=this.el.getAttribute(this.rawName)}setEventContext(e){this.eventContext=e}get value(){return this.el.getAttribute(this.rawName)}get method(){let{method:e}=this.parseOutMethodAndParams(this.value);return e}get params(){let{params:e}=this.parseOutMethodAndParams(this.value);return e}parseOutMethodAndParams(e){let r=e,i=[],n=r.match(/(.*?)\((.*)\)/s);return n&&(r=n[1],i=new Function("$event",`return (function () {
                for (var l=arguments.length, p=new Array(l), k=0; k<l; k++) {
                    p[k] = arguments[k];
                }
                return [].concat(p);
            })(${n[2]})`)(this.eventContext)),{method:r,params:i}}durationOr(e){let r,i=this.modifiers.find(s=>s.match(/([0-9]+)ms/)),n=this.modifiers.find(s=>s.match(/([0-9]+)s/));return i?r=Number(i.replace("ms","")):n&&(r=Number(n.replace("s",""))*1e3),r||e}};var x={rootComponentElements(){return Array.from(document.querySelectorAll(`[${m}id]`))},rootComponentElementsWithNoParents(t=null){t===null&&(t=document);let e=t.querySelectorAll(`[${m}initial-data]:not([${m}initial-data] > [${m}initial-data])`);return Array.from(e)},allModelElementsInside(t){return Array.from(t.querySelectorAll(`[${m}model]`))},getByAttributeAndValue(t,e){return document.querySelector(`[${m}${t}="${e}"]`)},nextFrame(t){requestAnimationFrame(()=>{requestAnimationFrame(t.bind(this))})},closestRoot(t){return this.closestByAttribute(t,"id")},closestByAttribute(t,e){let r=t.closest(`[${m}${e}]`);if(!r)throw`
                Raxm Error:

                Cannot find parent element in DOM tree containing attribute: [${m}${e}].

                Usually this is caused by Raxm's DOM-differ not being able to properly track changes.

                Reference the following guide for common causes: https://axm-raxm.com/docs/troubleshooting 

                Referenced element:

            ${t.outerHTML}`;return r},isComponentRootEl(t){return this.hasAttribute(t,"id")},hasAttribute(t,e){return t.hasAttribute(`${m}${e}`)},getAttribute(t,e){return t.getAttribute(`${m}${e}`)},removeAttribute(t,e){return t.removeAttribute(`${m}${e}`)},setAttribute(t,e,r){return t.setAttribute(`${m}${e}`,r)},hasFocus(t){return t===document.activeElement},isInput(t){return["INPUT","TEXTAREA","SELECT"].includes(t.tagName.toUpperCase())},isTextInput(t){return["INPUT","TEXTAREA"].includes(t.tagName.toUpperCase())&&!["checkbox","radio"].includes(t.type)},valueFromInput(t,e){if(t.type==="checkbox"){let r=E(t).get("model").value,i=e.deferredActions[r]?e.deferredActions[r].payload.value:X(e.data,r);return Array.isArray(i)?this.mergeCheckboxValueIntoArray(t,i):t.checked?t.getAttribute("value")||!0:!1}else if(t.tagName.toLowerCase()==="select"&&t.multiple)return this.getSelectValues(t);return t.value},mergeCheckboxValueIntoArray(t,e){return t.checked?e.includes(t.value)?e:e.concat(t.value):e.filter(r=>r!=t.value)},setInputValueFromModel(t,e){let r=E(t).get("model").value,i=X(e.data,r);t.tagName.toLowerCase()==="input"&&t.type==="file"||this.setInputValue(t,i)},setInputValue(t,e){if(d.callHook("interceptRaxmModelSetValue",e,t),t.type==="radio")t.checked=t.value==e;else if(t.type==="checkbox")if(Array.isArray(e)){let r=!1;e.forEach(i=>{i==t.value&&(r=!0)}),t.checked=r}else t.checked=!!e;else t.tagName.toLowerCase()==="select"?this.updateSelect(t,e):(e=e===void 0?"":e,t.value=e)},getSelectValues(t){return Array.from(t.options).filter(e=>e.selected).map(e=>e.value||e.text)},updateSelect(t,e){let r=[].concat(e).map(i=>i+"");Array.from(t.options).forEach(i=>{i.selected=r.includes(i.value)})},isAsset(t){return["link","style","script"].includes(t.tagName.toLowerCase())},isScript(t){return t.tagName.toLowerCase()==="script"},cloneScriptTag(t){let e=document.createElement("script");e.textContent=t.textContent,e.async=t.async;for(let r of t.attributes)e.setAttribute(r.name,r.value);return e},ignoreAttributes(t,e){let r=t;return e.forEach(i=>{let n=new RegExp(`${i}="[^"]*"|${i}='[^']*'`,"g");r=r.replace(n,"")}),r.trim()}};var Q=class{constructor(e,r){this.component=e,this.updateQueue=r}payload(){return{fingerprint:this.component.fingerprint,serverMemo:this.component.serverMemo,updates:this.updateQueue.map(e=>({type:e.type,payload:e.payload}))}}shouldSkipWatcherForDataKey(e){if(this.response.effects.dirty.includes(e))return!1;let r=(i,n)=>typeof i!="string"||typeof n!="string"?!1:i.split(".")[0]===n.split(".")[0];return this.updateQueue.filter(i=>r(i.name,e)).some(i=>i.skipWatcher)}storeResponse(e){return this.response=e}resolve(){let e=this.response.effects.returns||[];this.updateQueue.forEach(r=>{r.type==="callMethod"&&r.resolve(e[r.signature]!==void 0?e[r.signature]:e[r.method]!==void 0?e[r.method]:null)})}reject(){this.updateQueue.forEach(e=>{e.reject()})}},Y=class extends Q{constructor(e,r){super(e,[r])}get prefetchId(){return this.updateQueue[0].toId()}};var W=[];function ye(t,e){return typeof t=="string"&&(t=[t]),t.forEach(r=>{W[r]||(W[r]=[]),W[r].push(e)}),()=>{t.forEach(r=>{W[r]&&(W[r]=W[r].filter(i=>i!==e))})}}function pt(t,...e){let r=W[t]||[],i=[];for(let n=0;n<r.length;n++){let s=r[n](...e);et(s)&&i.push(s)}return n=>{let s=n;for(let o=0;o<i.length;o++){let a=i[o](s);a!==void 0&&(s=a)}return s}}var O=class extends _{constructor(t,e,r,i=!1){super(r,i),this.type="callMethod",this.method=t,this.payload={id:this.signature,method:t,params:e}}};var G=class extends _{constructor(t,e,r){super(r),this.type="syncInput",this.name=t,this.payload={id:this.signature,name:t,value:e}}};var re=class extends _{constructor(t,e,r,i=!1){super(r,i),this.type="syncInput",this.name=t,this.payload={id:this.signature,name:t,value:e}}};async function ie(t,e,...r){return new Promise((i,n)=>{let s=new O(e,r,t.el);$(t,s),s.onResolve(o=>i(o)),s.onReject(o=>n(o))})}function $(t,e){if(e instanceof re){t.deferredActions[e.name]=e;return}if(t.prefetchManager.actionHasPrefetch(e)&&t.prefetchManager.actionPrefetchResponseHasBeenReceived(e)){let r=t.prefetchManager.getPrefetchMessageByAction(e);t.handleResponse(r),t.prefetchManager.clearPrefetches();return}t.updateQueue.push(e),ge(t.fireMessage,5).apply(t),t.prefetchManager.clearPrefetches()}function ht(t,e){return e.split(".").reduce((r,i)=>typeof r>"u"?r:r[i],t.data)}async function Te(t,e,r,i=!1,n=!1){i?$(t,new re(e,r,t.el,n)):$(t,new O("$set",[e,r],t.el,n))}function mt(t,e){let r=[],i={callback:()=>{}};r.push(i);let n;return s=>{clearTimeout(n),n=setTimeout(()=>{t(s),n=void 0,i.callback()},e),i.callback=()=>clearTimeout(n)}}function gt(t,e){e&&e.forEach(r=>{r.callback()}),t()}function xt(t,e){if(t.prefetchManager.actionHasPrefetch(e))return;let r=new Y(t,e);t.prefetchManager.addMessage(r),t.connection.sendMessage(r)}var we={initialize(t,e){E(t).all().forEach(r=>{d.callHook("directive.initialized",{el:t,component:e,directive:r,cleanup:()=>{}}),this.attachDomListener(t,r,e)}),d.callHook("element.initialized",t,e)},attachDomListener(t,e,r){switch(e.type){case"keydown":case"keyup":this.attachListener(t,e,r,i=>{let s=["ctrl","shift","alt","meta","cmd","super"].filter(a=>e.modifiers.includes(a));if(s.length>0&&s.filter(l=>((l==="cmd"||l==="super")&&(l="meta"),!i[`${l}Key`])).length>0)return!1;if(i.keyCode===32||i.key===" "||i.key==="Spacebar")return e.modifiers.includes("space");let o=e.modifiers.filter(a=>!a.match(/^debounce$/)&&!a.match(/^[0-9]+m?s$/));return Boolean(o.length===0||i.key&&o.includes(Ze(i.key)))});break;case"click":this.attachListener(t,e,r,i=>{if(!!e.modifiers.includes("self"))return t.isSameNode(i.target)});break;default:this.attachListener(t,e,r);break}},attachListener(t,e,r,i){e.modifiers.includes("prefetch")&&t.addEventListener("mouseenter",()=>{xt(r,e.method,e.params)});let n=e.type,s=u=>{if(!(i&&i(u)===!1)){if(e.modifiers.includes("front")){let{method:v,params:g}=e;return tt(v,g)}gt(()=>{let v=u.target;e.setEventContext(u),this.preventAndStop(u,e.modifiers);let g=e.method,y=e.params;if(y.length===0&&u instanceof CustomEvent&&u.detail&&y.push(u.detail),g==="$emit"){r.scopedListeners.call(...y),d.emit(...y);return}if(g==="$emitUp"){d.emitUp(v,...y);return}if(g==="$emitSelf"){d.emitSelf(r.id,...y);return}if(g==="$emitTo"){d.emitTo(...y);return}e.value&&ie(r,g,y)})}},o=(u,v,g)=>u?ge(v,g):v,a=e.modifiers.includes("debounce"),l=o(a,s,e.durationOr(150));t.addEventListener(n,l),r.addListenerForTeardown(()=>{t.removeEventListener(n,l)})},preventAndStop(t,e){e.includes("prevent")&&t.preventDefault(),e.includes("stop")&&t.stopPropagation()}};var Ie=class{constructor(e){this.component=e,this.prefetchMessagesByActionId={}}addMessage(e){this.prefetchMessagesByActionId[e.prefetchId]=e}actionHasPrefetch(e){return Object.keys(this.prefetchMessagesByActionId).includes(e.toId())}actionPrefetchResponseHasBeenReceived(e){return!!this.getPrefetchMessageByAction(e).response}getPrefetchMessageByAction(e){return this.prefetchMessagesByActionId[e.toId()]}clearPrefetches(){this.prefetchMessagesByActionId={}}},yt=Ie;ye("effects",(t,e)=>{fr(t,e.listeners||[]),pr(t,e.dispatches||[])});function fr(t,e){e.forEach(r=>{let i=n=>{n.__raxm&&n.__raxm.receivedBy.push(t),t.$raxm.call("__dispatch",r,n.detail||{})};window.addEventListener(r,i),t.addCleanup(()=>window.removeEventListener(r,i)),t.el.addEventListener(r,n=>{n.__raxm&&n.bubbles||(n.__raxm&&n.__raxm.receivedBy.push(t.id),t.$raxm.call("__dispatch",r,n.detail||{}))})})}function pr(t,e){e.forEach(({name:r,params:i={},self:n=!1,to:s})=>{n?$e(t,r,i):s?Ne(t,s,r,i):_e(t,r,i)})}function Re(t,e,r,i=!0){let n=new CustomEvent(e,{bubbles:i,detail:r});n.__raxm={name:e,params:r,receivedBy:[]},t.dispatchEvent(n)}function _e(t,e,r){Re(t.el,e,r)}function $e(t,e,r){Re(t.el,e,r,!1)}function Ne(t,e,r,i){d(e).forEach(s=>{Re(s.el,r,i,!1)})}function wt(t,e,r){t.el.addEventListener(e,i=>{r(i.detail)})}function bt(t){return(e,r)=>{let i=r,n=e,s=t.$wire,o=s.get(n);return Alpine.interceptor((l,u,v,g,y)=>{if(typeof o>"u"){console.error(`Raxm Entangle Error: Raxm property '${n}' cannot be found`);return}return queueMicrotask(()=>{Alpine.entangle({get(){return s.get(e)},set(w){s.set(e,w,i)}},{get(){return u()},set(w){v(w)}})}),s.get(e)},l=>{Object.defineProperty(l,"live",{get(){return i=!0,l}})})(o)}}var Le=new WeakMap;function be(t){if(!Le.has(t)){let e=new De(t);Le.set(t,e),e.registerListeners()}return Le.get(t)}function vt(t,e,r,i){if(!(t.tagName==="INPUT"&&t.type==="file"))return;let n=be(r),s=()=>t.dispatchEvent(new CustomEvent("raxm-upload-start",{bubbles:!0,detail:{id:r.id,property:e}})),o=()=>t.dispatchEvent(new CustomEvent("raxm-upload-finish",{bubbles:!0,detail:{id:r.id,property:e}})),a=()=>t.dispatchEvent(new CustomEvent("raxm-upload-error",{bubbles:!0,detail:{id:r.id,property:e}})),l=g=>{var y=Math.round(g.loaded*100/g.total);t.dispatchEvent(new CustomEvent("raxm-upload-progress",{bubbles:!0,detail:{progress:y}}))},u=g=>{g.target.files.length!==0&&(s(),g.target.multiple?n.uploadMultiple(e,g.target.files,o,a,l):n.upload(e,g.target.files[0],o,a,l))};t.addEventListener("change",u);let v=()=>{t.value=null};t.addEventListener("click",v),i(()=>{t.removeEventListener("change",u),t.removeEventListener("click",v)})}var De=class{constructor(e){this.component=e,this.uploadBag=new ne,this.removeBag=new ne}registerListeners(){this.component.on("upload:generatedSignedUrl",(e,r)=>{this.component,this.handleSignedUrl(e,r)}),this.component.on("upload:generatedSignedUrlForS3",(e,r)=>{this.component,this.handleS3PreSignedUrl(e,r)}),this.component.on("upload:finished",(e,r)=>this.markUploadFinished(e,r)),this.component.on("upload:errored",e=>this.markUploadErrored(e)),this.component.on("upload:removed",(e,r)=>this.removeBag.shift(e).finishCallback(r))}upload(e,r,i,n,s){this.setUpload(e,{files:[r],multiple:!1,finishCallback:i,errorCallback:n,progressCallback:s})}uploadMultiple(e,r,i,n,s){this.setUpload(e,{files:Array.from(r),multiple:!0,finishCallback:i,errorCallback:n,progressCallback:s})}removeUpload(e,r,i){this.removeBag.push(e,{tmpFilename:r,finishCallback:i}),this.component.call("removeUpload",e,r)}setUpload(e,r){this.uploadBag.add(e,r),this.uploadBag.get(e).length===1&&this.startUpload(e,r)}handleSignedUrl(e,r){let i=new FormData;Array.from(this.uploadBag.first(e).files).forEach(o=>i.append("files[]",o,o.name));let n={Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-Axm":!0},s=xe();s&&(n["X-CSRF-TOKEN"]=s),this.makeRequest(e,i,"post",r,n,o=>o.paths)}handleS3PreSignedUrl(e,r){let i=this.uploadBag.first(e).files[0],n=r.headers;"Host"in n&&delete n.Host;let s=r.url;this.makeRequest(e,i,"put",s,n,o=>[r.path])}makeRequest(e,r,i,n,s,o){let a=new XMLHttpRequest;a.open(i,n),Object.entries(s).forEach(([l,u])=>{a.setRequestHeader(l,u)}),a.upload.addEventListener("progress",l=>{l.detail={},l.detail.progress=Math.round(l.loaded*100/l.total),this.uploadBag.first(e).progressCallback(l)}),a.addEventListener("load",()=>{if((a.status+"")[0]==="2"){let u=o(a.response&&JSON.parse(a.response));this.component.$raxm.call("finishUpload",e,u,this.uploadBag.first(e).multiple);return}let l=null;a.status===422&&(l=a.response),this.component.$raxm.call("uploadErrored",e,l,this.uploadBag.first(e).multiple)}),a.send(r)}startUpload(e,r){let i=r.files.map(n=>({name:n.name,size:n.size,type:n.type}));this.component.$raxm.call("startUpload",e,i,r.multiple),this.component}markUploadFinished(e,r){this.component;let i=this.uploadBag.shift(e);i.finishCallback(i.multiple?r:r[0]),this.uploadBag.get(e).length>0&&this.startUpload(e,this.uploadBag.last(e))}markUploadErrored(e){this.component,this.uploadBag.shift(e).errorCallback(),this.uploadBag.get(e).length>0&&this.startUpload(e,this.uploadBag.last(e))}},ne=class{constructor(){this.bag={}}add(e,r){this.bag[e]||(this.bag[e]=[]),this.bag[e].push(r)}push(e,r){this.add(e,r)}first(e){return this.bag[e]?this.bag[e][0]:null}last(e){return this.bag[e].slice(-1)[0]}get(e){return this.bag[e]}shift(e){return this.bag[e].shift()}call(e,...r){(this.listeners[e]||[]).forEach(i=>{i(...r)})}has(e){return Object.keys(this.listeners).includes(e)}};function Et(t,e,r,i=()=>{},n=()=>{},s=()=>{}){be(t).upload(e,r,i,n,s)}function St(t,e,r,i=()=>{},n=()=>{},s=()=>{}){be(t).uploadMultiple(e,r,i,n,s)}function At(t,e,r,i=()=>{},n=()=>{}){be(t).removeUpload(e,r,i,n)}var Pe={},Ct;function k(t,e,r=null){Pe[t]=e}function hr(t){Ct=t}var kt={on:"$on",get:"$get",set:"$set",call:"$call",sync:"$sync",watch:"$watch",upload:"$upload",commit:"$commit",entangle:"$entangle",dispatch:"$dispatch",dispatchTo:"$dispatchTo",dispatchSelf:"$dispatchSelf",removeUpload:"$removeUpload",uploadMultiple:"$uploadMultiple"};function Mt(t,e){return Pe[e](t)}function mr(t){return Ct(t)}k("__instance",t=>t);k("$get",t=>e=>ht(t,e));k("$set",t=>{Te(t,property,value,defer,skipWatcher)});k("$call",t=>async(e,...r)=>await ie(t,e,...r));k("$entangle",t=>e=>bt(t)(e));k("$toggle",t=>e=>Te(t,e,!t.$raxm.get(e)));k("$watch",t=>(e,r)=>{let i=!0,n,s=X(t.serverMemo.data,e);i?n=s:queueMicrotask(()=>{r(s,n),n=s}),i=!1});k("$refresh",t=>(...e)=>ie(t,"$refresh",...e));k("$on",t=>(...e)=>wt(t,...e));k("$dispatch",t=>(...e)=>_e(t,...e));k("$dispatchSelf",t=>(...e)=>$e(t,...e));k("$dispatchTo",t=>(...e)=>Ne(t,...e));k("$upload",t=>(...e)=>Et(t,...e));k("$uploadMultiple",t=>(...e)=>St(t,...e));k("$removeUpload",t=>(...e)=>At(t,...e));var Oe=new WeakMap;k("$parent",t=>{if(Oe.has(t))return Oe.get(t).$raxm;let e=ft(t.el.parentElement);return Oe.set(t,e),e.$raxm});var Z=new WeakMap;function Tt(t,e,r){Z.has(t)||Z.set(t,{});let i=Z.get(t);i[e]=r,Z.set(t,i)}hr(t=>e=>async(...r)=>{if(r.length===1&&r[0]instanceof Event&&(r=[]),Z.has(t)){let i=Z.get(t);if(typeof i[e]=="function")return i[e](r)}return await requestCall(t,e,r)});function It(t,e){return new Proxy({},{get(r,i){if(i==="__instance")return t;if(i in kt)return(...n)=>Mt(t,kt[i])(...n);if(i in Pe)return(...n)=>Mt(t,i)(...n);if(i in e)return e[i];if(!["then"].includes(i))return mr(t)(i)},set(r,i,n){return i in e&&(e[i]=n),!0}})}var P=class{constructor(e,r){if(e.__raxm)throw"Component already initialized";e.__raxm=this,this.el=e,this.lastFreshHtml=this.el.outerHTML,this.id=this.el.getAttribute(`${T}id`),this.checkForMultipleRootElements(),this.connection=r,this.encodeIData=this.el.getAttribute(`${T}initial-data`);let i=JSON.parse(this.encodeIData);if(!i)throw new"Initial data missing on Axm component with id: "+this.id;this.fingerprint=i.fingerprint,this.serverMemo=i.serverMemo,this.effects=i.effects,this.listeners=this.effects.listeners,this.updateQueue=[],this.deferredActions={},this.tearDownCallbacks=[],this.messageInTransit=void 0,this.scopedListeners=new U,this.prefetchManager=new yt(this),this.watchers={},this.genericLoadingEls={},d.callHook("component.initialized",this),this.$raxm=It(this,this.serverMemo),this.initialize()}get name(){return this.fingerprint.name}get data(){return this.serverMemo.data}get childIds(){return Object.values(this.serverMemo.children).map(e=>e.id)}checkForMultipleRootElements(){let e=(r,i=0)=>{if(!r||r.nodeType===Node.COMMENT_NODE&&r.textContent.includes(`${te}-end:${this.id}`))return i;let n=r.nodeType===Node.ELEMENT_NODE?1:0;return e(r.nextSibling,i+n)};e(this.el.nextSibling)>0&&console.warn("Raxm: Multiple root elements detected. This is not supported.",this.el)}initialize(){this.walk(e=>we.initialize(e,this),e=>d.addComponent(new P(e,this.connection)))}getPropertyValueIncludingDefers(e){let r=this.deferredActions[e];return r?r.payload.value:this.get(e)}updateServerMemoFromResponseAndMergeBackIntoResponse(e){Object.entries(e.response.serverMemo).forEach(([r,i])=>{r==="data"?Object.entries(i||{}).forEach(([n,s])=>{this.serverMemo.data[n]=s,!e.shouldSkipWatcherForDataKey(n)&&Object.entries(this.watchers).forEach(([o,a])=>{let l=o.split("."),u=l.shift(),v=l.join(".");if(u==n){let g=v?X(s,v):s;a.forEach(y=>y(g))}})}):this.serverMemo[r]=i}),e.response.serverMemo=Object.assign({},this.serverMemo)}incribeInitialDataOnElement(){this.el.setAttribute(`${T}initial-data`,this.encodeIData)}watch(e,r){this.watchers[e]||(this.watchers[e]=[]),this.watchers[e].push(r)}on(e,r){this.scopedListeners.register(e,r)}fireMessage(){if(this.messageInTransit)return;Object.entries(this.deferredActions).forEach(([r,i])=>{this.updateQueue.unshift(i)}),this.deferredActions={},this.messageInTransit=new Q(this,this.updateQueue);let e=()=>{this.connection.sendMessage(this.messageInTransit),d.callHook("message.sent",this.messageInTransit,this),this.updateQueue=[]};window.capturedRequestsForDusk?window.capturedRequestsForDusk.push(e):e()}messageSendFailed(){!this.messageInTransit||(d.callHook("message.failed",this.messageInTransit,this),this.messageInTransit.reject(),this.messageInTransit=null)}receiveMessage(e,r){e.storeResponse(r),!(e instanceof Y)&&(this.handleResponse(e),this.updateQueue.length>0&&this.fireMessage(),z(document,"Raxm:update"))}handleResponse(e){let r=e.response;if(this.updateServerMemoFromResponseAndMergeBackIntoResponse(e),d.callHook("message.received",e,this),r.effects.html?(this.lastFreshHtml=r.effects.html,this.handleMorph(r.effects.html.trim())):this.handleMorph(this.lastFreshHtml),r.effects.dirty&&this.forceRefreshDataBoundElementsMarkedAsDirty(r.effects.dirty),e.replaying||(this.messageInTransit&&this.messageInTransit.resolve(),this.messageInTransit=null,r.effects.emits&&r.effects.emits.length>0&&r.effects.emits.forEach(i=>{this.scopedListeners.call(i.event,...i.params),i.selfOnly?d.emitSelf(this.id,i.event,...i.params):i.to?d.emitTo(i.to,i.event,...i.params):i.ancestorsOnly?d.emitUp(this.el,i.event,...i.params):d.emit(i.event,...i.params)}),r.effects.dispatches&&r.effects.dispatches.length>0&&r.effects.dispatches.forEach(i=>{let n=i.data?i.data:{},s=new CustomEvent(i.event,{bubbles:!0,detail:n});this.el.dispatchEvent(s)})),d.callHook("message.processed",e,this),r.effects.redirect){setTimeout(()=>this.redirect(r.effects.redirect));return}}redirect(e){window.location.href=e}forceRefreshDataBoundElementsMarkedAsDirty(e){this.walk(r=>{let i=E(r);if(i.missing("model"))return;let n=i.get("model").value;!(r.nodeName=="SELECT"&&!r.multiple)&&x.hasFocus(r)&&!e.includes(n)||x.setInputValueFromModel(r,this)})}handleMorph(e){pt("effects",this.el,e)}walk(e,r=i=>{}){ke(this.el,i=>{if(i.isSameNode(this.el)){e(i);return}if(i.hasAttribute(`${T}id`))return r(i),!1;if(e(i)===!1)return!1})}addListenerForTeardown(e){this.tearDownCallbacks.push(e)}tearDown(){this.tearDownCallbacks.forEach(e=>e())}};function Be(t){let e=document.getElementById("raxm-error");e||(e=document.createElement("div"),e.id="raxm-error",e.style.cssText=`
            position: fixed;
            width: 100vw;
            height: 100vh;
            padding: 50px;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 200000;
        `,e.addEventListener("click",()=>Rt(e)),e.tabIndex=0,document.body.prepend(e),document.body.style.overflow="hidden");let r=document.createElement("iframe");r.style.cssText=`
        background-color: #17161A;
        border-radius: 5px;
        width: 100%;
        height: 100%;
    `,e.innerHTML="",e.appendChild(r),r.contentWindow.document.open(),r.contentWindow.document.write(t),r.contentWindow.document.close(),e.addEventListener("keydown",i=>{i.key==="Escape"&&Rt(e)}),e.focus()}function Rt(t){t.outerHTML="",document.body.style.overflow="visible"}var gr=document.querySelector("[data-baseUrl]")?.getAttribute("data-baseUrl")??window.raxmScriptConfig.baseUrl??null,se=class{constructor(){this.headers={}}onMessage(e,r){e.component.receiveMessage(e,r)}onError(e,r,i){return e.component.messageSendFailed(),d.onErrorCallback(r,i)}showExpiredMessage(e,r){d.sessionHasExpiredCallback?d.sessionHasExpiredCallback(e,r):confirm(`This page has expired.
Would you like to refresh the page?`)&&window.location.reload()}async sendMessage(e){let r=e.payload(),i=xe(),n=gr,s="POST";try{let o=this.buildHeaders(i,this.headers),a=await fetch(`${n}/raxm/update/${r.fingerprint.name}`,{method:s,body:JSON.stringify(r),credentials:"same-origin",headers:o});if(a.redirected&&(window.location.href=a.url),a.ok){let l=await a.text();rt(l)?([dump,content]=it(l),this.onError(e),Be(dump)):this.onMessage(e,JSON.parse(l))}else this.handleErrorResponse(a,e,this)}catch{this.onError(e)}}buildHeaders(e,r){let i={"Content-Type":"application/json",Accept:"text/html, application/xhtml+xml","X-Requested-With":"XMLHttpRequest","X-Axm":!0,...r};return e&&(i["X-CSRF-TOKEN"]=e),i}handleErrorResponse(e,r,i){i.onError(r,e.status,e)!==!1&&(e.status===419&&!d.sessionHasExpired?(d.sessionHasExpired=!0,i.showExpiredMessage(e,r)):e.text().then(n=>{Be(n)}))}};function _t(){z(document,"raxm:init"),z(document,"raxm:initializing"),x.rootComponentElementsWithNoParents().forEach(t=>{d.addComponent(new P(t,new se))}),z("raxm:load"),document.addEventListener("visibilitychange",()=>{d.raxmIsInBackground=document.hidden},!1),d.initialRenderIsFinished=!0,setTimeout(()=>window.Raxm.initialRenderIsFinished=!0),z(document,"raxm:initialized")}function $t(){}function Nt(){}function Lt(t,e){if(br())return xr(t,e);if(t.__x&&window.Alpine.clone(t.__x,e),Array.from(t.attributes).map(r=>r.name).some(r=>/x-show/.test(r)))if(t.__x_transition)t.skipElUpdatingButStillUpdateChildren=!0;else if(yr(t,e)){let r=e.getAttribute("style");r&&e.setAttribute("style",r.replace("display: none;",""))}else wr(t,e)&&(e.style.display=t.style.display)}function xr(t,e){t.nodeType===1&&t._x_dataStack&&window.Alpine.clone(t,e)}function yr(t,e){return Dt()?t.style.display===""&&e.style.display==="none":t.__x_is_shown&&!e.__x_is_shown}function wr(t,e){return Dt()?t.style.display==="none"&&e.style.display==="":!t.__x_is_shown&&e.__x_is_shown}function Dt(){let[t,e,r]=window.Alpine.version.split(".").map(i=>Number(i));return t<=2&&e<=7&&r<=2}function br(){return window.Alpine&&window.Alpine.version&&/^3\..+\..+$/.test(window.Alpine.version)}var ee={};d.registerHook("element.initialized",(t,e)=>{E(t).missing("submit")||t.addEventListener("submit",()=>{ee[e.id]=[],e.walk(i=>{if(!!t.contains(i)){if(i.hasAttribute(`${m}ignore`))return!1;i.tagName.toLowerCase()==="button"&&i.type==="submit"||i.tagName.toLowerCase()==="select"||i.tagName.toLowerCase()==="input"&&(i.type==="checkbox"||i.type==="radio")?(i.disabled||ee[e.id].push(()=>i.disabled=!1),i.disabled=!0):(i.tagName.toLowerCase()==="input"||i.tagName.toLowerCase()==="textarea")&&(i.readOnly||ee[e.id].push(()=>i.readOnly=!1),i.readOnly=!0)}})})});d.registerHook("message.failed",(t,e)=>Ot(e));d.registerHook("message.received",(t,e)=>Ot(e));function Ot(t){if(!!ee[t.id])for(;ee[t.id].length>0;)ee[t.id].shift()()}d.registerHook("message.received",(t,e)=>{let r=t.response;if(!r.effects.download)return;let i=window.webkitURL||window.URL,n=i.createObjectURL(vr(r.effects.download.content,r.effects.download.contentType)),s=document.createElement("a");s.style.display="none",s.href=n,s.download=r.effects.download.name,document.body.appendChild(s),s.click(),setTimeout(function(){i.revokeObjectURL(n)},0)});function vr(t,e="",r=512){let i=atob(t),n=[];e===null&&(e="");for(let s=0;s<i.length;s+=r){let o=i.slice(s,s+r),a=new Array(o.length);for(let u=0;u<o.length;u++)a[u]=o.charCodeAt(u);let l=new Uint8Array(a);n.push(l)}return new Blob(n,{type:e})}d.registerHook("message.received",(t,e)=>{let r=t.response;if(!r.effects.forStack)return;let i=[];for(r.effects.forStack.forEach(({key:n,stack:s,type:o,contents:a})=>{let l=document.querySelector(`[axm-stack="${s}"]`),u=document.querySelector(`[axm-end-stack="${s}"]`);if(!l||!u||Er(l,u,n))return;let v=w=>l.parentElement.insertBefore(w,l.nextElementSibling),g=w=>u.parentElement.insertBefore(w,u),y=Sr(a);i.push(()=>o==="push"?g(y):v(y))});i.length>0;)i.shift()()});function Er(t,e,r){let i=n=>{if(!n.isSameNode(e))return n.matches(`[axm-stack-key="${r}"]`)?n:i(n.nextElementSibling)};return i(t)}function Sr(t){return document.createRange().createContextualFragment(t)}d.registerHook("message.received",(t,e)=>{let r=t.response,i=r.effects.js,n=r.effects.xjs;i&&Object.entries(i).forEach(([s,o])=>{Tt(e,s,()=>{Pt(e.el,o)})}),n&&n.forEach(s=>{Pt(e.el,s)})});var Ar=new Map;async function Pt(t,e){let r=new He(e),i;try{i=await new Function("sandbox",`with (sandbox) { ${t} }`).call(null,r)}catch(s){kr(s)}typeof i=="string"&&(i=Mr(i));let n={result:i,context:e,key};return Ar.set(key,n),n}function kr(t){throw console.error(t),new Error("Evaluation failed")}function Mr(t){return t.replace(/<[^>]*>/g,"")}var He=class{constructor(e){this.context=e,this.objects=new Map}get(e){return this.context.hasOwnProperty(e)?this.context[e]:this.objects.has(e)?this.objects.get(e):void 0}set(e,r){this.objects.set(e,r)}call(e,...r){let i=this.get(e);if(i===void 0)throw new Error(`No existe el objeto ${e}`);return i.apply(this,r)}create(e,...r){let i=new e(...r);return this.objects.set(i.constructor.name,i),i}};var Cr={version:"0.2.0",settings:{minimum:.08,easing:"linear",positionUsing:"",speed:200,trickle:!0,trickleSpeed:200,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:`
            <div class="bar" role="bar"><div class="peg"></div></div>
            <div class="spinner" role="spinner"><div class="spinner-icon"></div></div>
        `},status:null,configure(t){return Object.assign(this.settings,t),this},set(t){let e=this.isStarted();t=this.clamp(t,this.settings.minimum,1),this.status=t===1?null:t;let r=this.render(!e),i=r.querySelector(this.settings.barSelector),{speed:n,easing:s}=this.settings;return r.offsetWidth,this.queue(o=>{this.settings.positionUsing===""&&(this.settings.positionUsing=this.getPositioningCSS()),this.css(i,this.barPositionCSS(t,n,s)),t===1?(this.css(r,{transition:"none",opacity:1}),r.offsetWidth,setTimeout(()=>{this.css(r,{transition:`all ${n}ms linear`,opacity:0}),setTimeout(()=>{this.remove(),o()},n)},n)):setTimeout(o,n)}),this},isStarted(){return typeof this.status=="number"},start(){this.status||this.set(0);let t=()=>{setTimeout(()=>{!this.status||(this.trickle(),t())},this.settings.trickleSpeed)};return this.settings.trickle&&t(),this},done(t){return!t&&!this.status?this:this.inc(.3+.5*Math.random()).set(1)},inc(t){let e=this.status;return e?e>1?void 0:(typeof t!="number"&&(e>=0&&e<.2?t=.1:e>=.2&&e<.5?t=.04:e>=.5&&e<.8?t=.02:e>=.8&&e<.99?t=.005:t=0),e=this.clamp(e+t,0,.994),this.set(e)):this.start()},trickle(){return this.inc()},render(t){if(this.isRendered())return document.getElementById("nprogress");this.addClass(document.documentElement,"nprogress-busy");let e=document.createElement("div");e.id="nprogress",e.innerHTML=this.settings.template;let r=e.querySelector(this.settings.barSelector),i=t?"-100":this.toBarPerc(this.status||0),n=this.isDOM(this.settings.parent)?this.settings.parent:document.querySelector(this.settings.parent),s;return this.css(r,{transition:"all 0 linear",transform:`translate3d(${i}%,0,0)`}),this.settings.showSpinner||(s=e.querySelector(this.settings.spinnerSelector),s&&this.removeElement(s)),n!=document.body&&this.addClass(n,"nprogress-custom-parent"),n.appendChild(e),e},remove(){this.removeClass(document.documentElement,"nprogress-busy");let t=this.isDOM(this.settings.parent)?this.settings.parent:document.querySelector(this.settings.parent);this.removeClass(t,"nprogress-custom-parent");let e=document.getElementById("nprogress");e&&this.removeElement(e)},isRendered(){return!!document.getElementById("nprogress")},getPositioningCSS(){let t=document.body.style,e="WebkitTransform"in t?"Webkit":"MozTransform"in t?"Moz":"msTransform"in t?"ms":"OTransform"in t?"O":"";return e+"Perspective"in t?"translate3d":e+"Transform"in t?"translate":"margin"},isDOM(t){return typeof HTMLElement=="object"?t instanceof HTMLElement:t&&typeof t=="object"&&t.nodeType===1&&typeof t.nodeName=="string"},clamp(t,e,r){return t<e?e:t>r?r:t},toBarPerc(t){return(-1+t)*100},barPositionCSS(t,e,r){let i;return this.settings.positionUsing==="translate3d"?i={transform:`translate3d(${this.toBarPerc(t)}%,0,0)`}:this.settings.positionUsing==="translate"?i={transform:`translate(${this.toBarPerc(t)}%,0)`}:i={"margin-left":`${this.toBarPerc(t)}%`},i.transition=`all ${e}ms ${r}`,i},queue:function(){let t=[];function e(){let r=t.shift();r&&r(e)}return function(r){t.push(r),t.length===1&&e()}}(),css:(()=>{let t=["Webkit","O","Moz","ms"],e={};function r(s){return s.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(o,a)=>a.toUpperCase())}function i(s){let o=document.body.style;if(s in o)return s;let a=t.length,l=s.charAt(0).toUpperCase()+s.slice(1),u;for(;a--;)if(u=t[a]+l,u in o)return u;return s}function n(s){return s=r(s),e[s]||(e[s]=i(s))}return(s,o)=>{let a,l;if(o){for(a in o)if(l=o[a],l!==void 0&&o.hasOwnProperty(a)){let u=n(a);s.style[u]=l}}}})(),hasClass(t,e){return(typeof t=="string"?t:this.classList(t)).indexOf(` ${e} `)>=0},addClass(t,e){let r=this.classList(t),i=r+e;this.hasClass(r,e)||(t.className=i.substring(1))},removeClass(t,e){let r=this.classList(t),i;this.hasClass(t,e)&&(i=r.replace(` ${e} `," "),t.className=i.substring(1,i.length-1))},classList(t){return` ${t&&t.className||""} `.replace(/\s+/gi," ")},removeElement(t){t&&t.parentNode&&t.parentNode.removeChild(t)}},R=Cr;var Bt=null;function Tr(t){document.addEventListener("raxm:navigating",Ir.bind(null,t)),document.addEventListener("raxm:navigate",Rr),document.addEventListener("raxm:navigated",_r)}function Ir(t){Bt=setTimeout(()=>R.start(),t)}function Rr(t){R.isStarted()&&t.detail.progress.percentage&&R.set(Math.max(R.status,t.detail.progress.percentage/100*.9))}function _r(t){if(clearTimeout(Bt),R.isStarted())t.detail.visit.completed?R.done():t.detail.visit.interrupted?R.set(0):t.detail.visit.cancelled&&(R.done(),R.remove());else return}function $r(t){let e=document.createElement("style");e.type="text/css",e.textContent=`
	#nprogress {
		pointer-events: none;
	}

	#nprogress .bar {
		background: ${t};

		position: fixed;
		z-index: 1031;
		top: 0;
		left: 0;

		width: 100%;
		height: 2px;
	}

	#nprogress .peg {
		display: block;
		position: absolute;
		right: 0px;
		width: 100px;
		height: 100%;
		box-shadow: 0 0 10px ${t}, 0 0 5px ${t};
		opacity: 1.0;

		-webkit-transform: rotate(3deg) translate(0px, -4px);
			-ms-transform: rotate(3deg) translate(0px, -4px);
				transform: rotate(3deg) translate(0px, -4px);
	}

	#nprogress .spinner {
		display: block;
		position: fixed;
		z-index: 1031;
		top: 15px;
		right: 15px;
	}

	#nprogress .spinner-icon {
		width: 18px;
		height: 18px;
		box-sizing: border-box;

		border: solid 2px transparent;
		border-top-color: ${t};
		border-left-color: ${t};
		border-radius: 50%;

		-webkit-animation: nprogress-spinner 400ms linear infinite;
				animation: nprogress-spinner 400ms linear infinite;
	}

	.nprogress-custom-parent {
		overflow: hidden;
		position: relative;
	}

	.nprogress-custom-parent #nprogress .spinner,
	.nprogress-custom-parent #nprogress .bar {
		position: absolute;
	}

	@-webkit-keyframes nprogress-spinner {
		0%   { -webkit-transform: rotate(0deg); }
		100% { -webkit-transform: rotate(360deg); }
	}
	@keyframes nprogress-spinner {
		0%   { transform: rotate(0deg); }
		100% { transform: rotate(360deg); }
	}
	`,document.head.appendChild(e)}var Nr={init({delay:t=250,color:e="#29d",includeCSS:r=!0,showSpinner:i=!1}={}){Tr(t),R.configure({showSpinner:i}),r&&$r(e)}},Ht=Nr;b("navigate",({el:t,directive:e,component:r})=>{t.addEventListener("click",qt.handleNavigate)});var Lr=10,jt=["data-csrf"],Ue=class{constructor(){this.oldBodyScriptTagHashes=[],this.handleNavigate=this.handleNavigate.bind(this),window.addEventListener("popstate",this.handlePopState.bind(this))}handleNavigate(e){if(this.shouldInterceptClick(e))return;e.preventDefault();let r=e.target.getAttribute("href");this.navigateTo(r)}shouldInterceptClick(e){return e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}async navigateTo(e){this.updateHistoryStateForCurrentPage();let r=await Dr(e),i={html:r.html},n=new URL(e,document.baseURI);window.location.href===n.href?this.replaceState(n,i.html):this.pushState(n,i.html),Ut(r.html)}handlePopState(e){let r=e.state;if(r&&r.raxm&&r.raxm._html)Ut(this.fromSessionStorage(r.raxm._html));else{this.navigateTo(window.location.href,!0);return}dispatchEvent(new Event("raxm:popstate")),window.Raxm.start()}updateHistoryStateForCurrentPage(){let e=new URL(window.location.href,document.baseURI),r={html:document.documentElement.outerHTML};this.replaceState(e,r.html)}pushState(e,r){this.updateState("pushState",e,r)}replaceState(e,r){this.updateState("replaceState",e,r)}updateState(e,r,i){this.clearState();let n=new Date().getTime();this.tryToStoreInSession(n,i);let s=history.state||{};s.raxm||(s.raxm={}),s.raxm._html=n;try{history[e](s,document.title,r)}catch(o){o instanceof DOMException&&o.name==="SecurityError"&&console.error("Raxm: You can't use axm:navigate with a link to a different root domain: "+r)}}clearState(){let e=window.history.state||{},r=e.raxm||[];r.length>=Lr&&(window.history.go(-1),r.shift(),e.raxm=r,window.history.replaceState(e,document.title,window.location.href))}fromSessionStorage(e){return JSON.parse(sessionStorage.getItem("raxm:"+e))}tryToStoreInSession(e,r){try{sessionStorage.setItem("raxm:"+e,JSON.stringify(r))}catch(i){if(![22,1,2,3,4,5,6,7,8,9,10,11,12,13,14].includes(i.code))return;let n=Object.keys(sessionStorage).map(s=>Number(s.replace("raxm:",""))).sort().shift();if(!n)return;sessionStorage.removeItem("raxm:"+n),this.tryToStoreInSession(e,r)}}},qt=new Ue;async function Dr(t){document.dispatchEvent(new Event("raxm:navigating"));try{return{html:await(await fetch(t)).text()}}catch(e){return console.error("Error loading view:",e),{html:""}}}async function Ut(t){let e=new DOMParser().parseFromString(t,"text/html"),r=document.adoptNode(e.body),i=document.adoptNode(e.head),n=Array.from(r.querySelectorAll("script")).map(o=>Vt(x.ignoreAttributes(o.outerHTML,jt)));Or(i),Br(r,n);let s=document.body;document.body.replaceWith(r),document.dispatchEvent(new CustomEvent("raxm:navigated",{detail:{visit:{completed:!0}}}))}function Vt(t){return t.split("").reduce((e,r)=>(e=(e<<5)-e+r.charCodeAt(0),e&e),0)}function Or(t){let e=Array.from(document.head.children),r=e.map(s=>s.outerHTML),i=document.createDocumentFragment(),n=[];for(let s of Array.from(t.children))x.isAsset(s)&&(r.includes(s.outerHTML)?i.appendChild(s):(zt(s)&&Pr(s,e)&&setTimeout(()=>window.location.reload()),x.isScript(s)?document.head.appendChild(x.cloneScriptTag(s)):document.head.appendChild(s)),n.push(s));for(let s of Array.from(document.head.children))x.isAsset(s)||s.remove();for(let s of Array.from(t.children))document.head.appendChild(s)}function Pr(t,e){let[r,i]=Ft(t);return e.some(n=>{if(!zt(n))return!1;let[s,o]=Ft(n);if(s===r&&i!==o)return!0})}function Ft(t){return(x.isScript(t)?t.src:t.href).split("?")}function Br(t,e){t.querySelectorAll("script").forEach(r=>{if(r.hasAttribute("data-navigate-once")){let i=Vt(x.ignoreAttributes(r.outerHTML,jt));if(e.includes(i))return}r.replaceWith(x.cloneScriptTag(r))})}function zt(t){return t.hasAttribute("data-navigate-track")}function Xt(t){qt.navigateTo(t,!0)}var Hr=!1,Wt=!0;Ur()&&Fr();function Gt(t,e,r){t.redirectUsingNavigate||Hr?Xt(e):r()}function Ur(){return!!(document.querySelector("[data-no-progress-bar]")||Wt)}function Fr(){Wt&&Ht.init()}d.registerHook("message.received",(t,e)=>{let r=t.response.effects;!r.redirect||Gt(r,url,()=>{window.location.href=url})});function Fe(t,e){if(!(t._x_isShown!==void 0&&e._x_isShown!==void 0)&&!(t._x_isShown&&!e._x_isShown)&&!(!t._x_isShown&&e._x_isShown)){var r=e.attributes,i,n,s,o,a,l;for(i=r.length-1;i>=0;--i)n=r[i],s=n.name,o=n.namespaceURI,a=n.value,o?(s=n.localName||s,l=t.getAttributeNS(o,s),l!==a&&(n.prefix==="xmlns"&&(s=n.name),t.setAttributeNS(o,s,a))):(l=t.getAttribute(s),l!==a&&t.setAttribute(s,a));for(r=t.attributes,i=r.length-1;i>=0;--i)n=r[i],n.specified!==!1&&(s=n.name,o=n.namespaceURI,o?(s=n.localName||s,e.hasAttributeNS(o,s)||t.removeAttributeNS(o,s)):e.hasAttribute(s)||t.removeAttribute(s))}}function je(t,e,r){t[r]!==e[r]&&(t[r]=e[r],t[r]?t.setAttribute(r,""):t.removeAttribute(r))}var qe={OPTION:function(t,e){var r=t.parentNode;if(r){var i=r.nodeName.toUpperCase();i==="OPTGROUP"&&(r=r.parentNode,i=r&&r.nodeName.toUpperCase()),i==="SELECT"&&!r.hasAttribute("multiple")&&(t.hasAttribute("selected")&&!e.selected&&(t.setAttribute("selected","selected"),t.removeAttribute("selected")),r.selectedIndex=-1)}je(t,e,"selected")},INPUT:function(t,e){je(t,e,"checked"),je(t,e,"disabled"),t.value!==e.value&&(t.value=e.value),e.hasAttribute("value")||t.removeAttribute("value")},TEXTAREA:function(t,e){var r=e.value;t.value!==r&&(t.value=r);var i=t.firstChild;if(i){var n=i.nodeValue;if(n==r||!r&&n==t.placeholder)return;i.nodeValue=r}},SELECT:function(t,e){if(!e.hasAttribute("multiple")){for(var r=-1,i=0,n=t.firstChild,s,o;n;)if(o=n.nodeName&&n.nodeName.toUpperCase(),o==="OPTGROUP")s=n,n=s.firstChild;else{if(o==="OPTION"){if(n.hasAttribute("selected")){r=i;break}i++}n=n.nextSibling,!n&&s&&(n=s.nextSibling,s=null)}t.selectedIndex=r}}};var ve,jr="http://www.w3.org/1999/xhtml",M=typeof document>"u"?void 0:document,qr=!!M&&"content"in M.createElement("template"),Vr=!!M&&M.createRange&&"createContextualFragment"in M.createRange();function zr(t){var e=M.createElement("template");return e.innerHTML=t,e.content.childNodes[0]}function Xr(t){ve||(ve=M.createRange(),ve.selectNode(M.body));var e=ve.createContextualFragment(t);return e.childNodes[0]}function Wr(t){var e=M.createElement("body");return e.innerHTML=t,e.childNodes[0]}function Jt(t){return t=t.trim(),qr?zr(t):Vr?Xr(t):Wr(t)}function oe(t,e){var r=t.nodeName,i=e.nodeName;return r===i?!0:e.actualize&&r.charCodeAt(0)<91&&i.charCodeAt(0)>90?r===i.toUpperCase():!1}function Kt(t,e){return!e||e===jr?M.createElement(t):M.createElementNS(e,t)}function Qt(t,e){for(var r=t.firstChild;r;){var i=r.nextSibling;e.appendChild(r),r=i}return e}var ae=1,Gr=11,Yt=3,Zt=8;function J(){}function Jr(t){return t.id}function S(t,...e){if(t.name!=="getNodeKey"&&t.name,typeof e[0].hasAttribute=="function")return t(...e)}function Ve(t){return function(r,i,n){if(n||(n={}),typeof i=="string")if(r.nodeName==="#document"||r.nodeName==="HTML"){var s=i;i=M.createElement("html"),i.innerHTML=s}else i=Jt(i);var o=n.getNodeKey||Jr,a=n.onBeforeNodeAdded||J,l=n.onNodeAdded||J,u=n.onBeforeElUpdated||J,v=n.onElUpdated||J,g=n.onBeforeNodeDiscarded||J,y=n.onNodeDiscarded||J,w=n.onBeforeElChildrenUpdated||J,N=n.childrenOnly===!0,C=Object.create(null),j=[];function le(f){j.push(f)}function Ge(f,p){if(f.nodeType===ae)for(var c=f.firstChild;c;){var h=void 0;p&&(h=S(o,c))?le(h):(S(y,c),c.firstChild&&Ge(c,p)),c=c.nextSibling}}function de(f,p,c){S(g,f)!==!1&&(p&&p.removeChild(f),S(y,f),Ge(f,c))}function Je(f){if(f.nodeType===ae||f.nodeType===Gr)for(var p=f.firstChild;p;){var c=S(o,p);c&&(C[c]=p),Je(p),p=p.nextSibling}}Je(r);function ce(f){if(S(l,f),!f.skipAddingChildren)for(var p=f.firstChild;p;){var c=p.nextSibling,h=S(o,p);if(h){var I=C[h];I&&oe(p,I)?(p.parentNode.replaceChild(I,p),ue(I,p)):ce(p)}else ce(p);p=c}}function ar(f,p,c){for(;p;){var h=p.nextSibling;(c=S(o,p))?le(c):de(p,f,!0),p=h}}function ue(f,p,c){var h=S(o,p);h&&delete C[h],!(!c&&(S(u,f,p)===!1||(f.skipElUpdatingButStillUpdateChildren||t(f,p),S(v,f),S(w,f,p)===!1)))&&(f.nodeName!=="TEXTAREA"?lr(f,p):f.innerHTML!=p.innerHTML&&qe.TEXTAREA(f,p))}function lr(f,p){var c=p.firstChild,h=f.firstChild,I,B,q,pe,H;e:for(;c;){for(pe=c.nextSibling,I=S(o,c);h;){if(q=h.nextSibling,c.isSameNode&&c.isSameNode(h)){c=pe,h=q;continue e}B=S(o,h);var he=h.nodeType,L=void 0;if(he===c.nodeType&&(he===ae?(I?I!==B&&((H=C[I])?q===H?L=!1:(f.insertBefore(H,h),B?le(B):de(h,f,!0),h=H):L=!1):B&&(L=!1),L=L!==!1&&oe(h,c),L&&(!c.isEqualNode(h)&&c.nextElementSibling&&c.nextElementSibling.isEqualNode(h)?L=!1:ue(h,c))):(he===Yt||he==Zt)&&(L=!0,h.nodeValue!==c.nodeValue&&(h.nodeValue=c.nodeValue))),L){c=pe,h=q;continue e}if(c.nextElementSibling&&c.nextElementSibling.isEqualNode(h)){let Ye=c.cloneNode(!0);f.insertBefore(Ye,h),ce(Ye),c=c.nextElementSibling.nextSibling,h=q;continue e}else B?le(B):de(h,f,!0);h=q}if(I&&(H=C[I])&&oe(H,c))f.appendChild(H),ue(H,c);else{var Ae=S(a,c);Ae!==!1&&(Ae&&(c=Ae),c.actualize&&(c=c.actualize(f.ownerDocument||M)),f.appendChild(c),ce(c))}c=pe,h=q}ar(f,h,B);var Qe=qe[f.nodeName];Qe&&!f.isLiveaxmModel&&Qe(f,p)}var A=r,fe=A.nodeType,Ke=i.nodeType;if(!N){if(fe===ae)Ke===ae?oe(r,i)||(S(y,r),A=Qt(r,Kt(i.nodeName,i.namespaceURI))):A=i;else if(fe===Yt||fe===Zt){if(Ke===fe)return A.nodeValue!==i.nodeValue&&(A.nodeValue=i.nodeValue),A;A=i}}if(A===i)S(y,r);else{if(i.isSameNode&&i.isSameNode(A))return;if(ue(A,i,N),j)for(var Ee=0,dr=j.length;Ee<dr;Ee++){var Se=C[j[Ee]];Se&&de(Se,Se.parentNode,!1)}}return!N&&A!==r&&r.parentNode&&(A.actualize&&(A=A.actualize(r.ownerDocument||M)),r.parentNode.replaceChild(A,r)),A}}var Kr=Ve(Fe),er=Kr;function tr(t,e){let r={changed:[],added:[],removed:[]},i=t.__raxm.id;er(t,e,{childrenOnly:!1,getNodeKey:o=>{if(!n(o))return o.hasAttribute(`${m}key`)?o.getAttribute(`${m}key`):o.hasAttribute(`${T}id`)?o.getAttribute(`${m}id`):o.id},onBeforeNodeAdded:o=>{},onBeforeNodeDiscarded:o=>{if(o.__x_inserted_me&&Array.from(o.attributes).some(a=>/x-transition/.test(a.name)))return!1},onNodeDiscarded:o=>{d.callHook("element.removed",o,t),o.__raxm&&d.removeComponent(o.__raxm),r.removed.push(o)},onBeforeElChildrenUpdated:o=>{},onBeforeElUpdated:(o,a)=>{if(o.isEqualNode(a))return!1;d.callHook("element.updating",o,a,t),o.hasAttribute(`${m}model`)&&o.tagName.toUpperCase()==="SELECT"&&(a.selectedIndex=-1);let l=E(o);if(l.has("ignore")||o.__raxm_ignore===!0||o.__raxm_ignore_self===!0)if(l.has("ignore")&&l.get("ignore").modifiers.includes("self")||o.__raxm_ignore_self===!0)o.skipElUpdatingButStillUpdateChildren=!0;else return!1;if(x.isComponentRootEl(o)&&o.getAttribute(`${T}id`)!==i)return!1;x.isComponentRootEl(o)&&(a.__raxm=t),Lt(o,a)},onElUpdated:o=>{r.changed.push(o),d.callHook("element.updated",o,t)},onNodeAdded:o=>{if(x.closestRoot(o).getAttribute(`${m}id`)===i){if(we.initialize(o,t)===!1)return!1}else x.isComponentRootEl(o)&&(d.addComponent(new P(o,t.connection)),o.skipAddingChildren=!0);r.added.push(o)}}),window.skipShow=!1;function n(o){return typeof o.hasAttribute!="function"}function s(o){return o.hasAttribute(T)}}ye("effects",(t,e)=>{!e||queueMicrotask(()=>{tr(t,e)})});b("confirm",({el:t,directive:e})=>{let r=e.expression,i=e.modifiers.includes("prompt");r=r.replaceAll("\\n",`
`),r===""&&(r="Are you sure?"),t.__raxm_confirm=n=>{if(i){let[s,o]=r.split("|");o?prompt(s)===o&&n():console.warn("Raxm: Must provide expectation with axm:confirm.prompt")}else confirm(r)&&n()}});function F(t,e,r,i=null){if(r=e.modifiers.includes("remove")?!r:r,e.modifiers.includes("class")){let n=e.expression.split(" ");r?t.classList.add(...n):t.classList.remove(...n)}else if(e.modifiers.includes("attr"))r?t.setAttribute(e.expression,!0):t.removeAttribute(e.expression);else{let n=i??window.getComputedStyle(t,null).getPropertyValue("display"),s=["inline","block","table","flex","grid","inline-flex"].filter(o=>e.modifiers.includes(o))[0]||"inline-block";s=e.modifiers.includes("remove")?n:s,t.style.display=r?s:"none"}}var ze=new Set,Xe=new Set;window.addEventListener("offline",()=>ze.forEach(t=>t()));window.addEventListener("online",()=>Xe.forEach(t=>t()));b("offline",({el:t,directive:e,cleanup:r})=>{let i=()=>F(t,e,!0),n=()=>F(t,e,!1);ze.add(i),Xe.add(n),r(()=>{ze.delete(i),Xe.delete(n)})});b("loading",({el:t,directive:e,component:r})=>{let i=ti(t),[n,s]=Qr(e),o=()=>n(()=>F(t,e,!0)),a=()=>s(()=>F(t,e,!1));Yr(r,i,[o,a]),Zr(r,i,[o,a])});function Qr(t){if(!t.modifiers.includes("delay")||t.modifiers.includes("none"))return[s=>s(),s=>s()];let e=200,r={shortest:50,shorter:100,short:150,default:200,long:300,longer:500,longest:1e3};Object.keys(r).includes(t.modifiers[0])&&(e=r[t.modifiers[0]]);let i,n=!1;return[s=>{i=setTimeout(()=>{s(),n=!0},e)},s=>{n?s():clearTimeout(i)}]}function Yr(t,e,[r,i]){let n=(o,a)=>{if(t!==a)return;let l=o.updateQueue[0].payload;e.length>0&&!ei(l,e)||r()},s=()=>{i()};d.registerHook("message.sent",n),d.registerHook("message.failed",s),d.registerHook("message.received",s),d.registerHook("element.removed",s)}function Zr(t,e,[r,i]){let n=s=>{let{id:o,property:a}=s.detail;return o!==t.id||e.length>0&&!e.map(l=>l.target).includes(a)};window.addEventListener("raxm-upload-start",s=>{n(s)||r()}),window.addEventListener("raxm-upload-finish",s=>{n(s)||i()}),window.addEventListener("raxm-upload-error",s=>{n(s)||i()})}function ei(t,e){let{name:r,method:i,params:n}=t;return e.find(({target:o,tparams:a})=>a?o===i&&a===rr(JSON.stringify(n)):r===o||i===o)!==void 0}function ti(t){let e=E(t),r=[];if(e.has("target")){let i=e.get("target"),n=i.expression;n.includes("(")&&n.includes(")")?r.push({target:i.method,params:rr(JSON.stringify(i.params))}):n.includes(",")?n.split(",").map(s=>s.trim()).forEach(s=>{r.push({target:s})}):r.push({target:n})}else{let i=["init","dirty","offline","target","loading","poll","ignore","key","id"];r=e.all().filter(n=>!i.includes(n.value)&&n.expression.split("(")[0]).map(n=>({target:n.expression.split("(")[0]}))}return r}function rr(t){return btoa(encodeURIComponent(t))}b("ignore",({el:t,directive:e})=>{e.modifiers.includes("self")?t.__raxm_ignore_self=!0:t.__raxm_ignore=!0});var ir=new me;d.registerHook("component.initialized",(t,e,r)=>{setTimeout(()=>{ir.each(r,i=>i(!1))})});b("dirty",({el:t,directive:e,component:r})=>{let i=ri(t),n=!1,s=t.style.display,o=l=>{F(t,e,l,s),n=l};ir.add(r,o);let a=!1;for(let l=0;l<i.length&&!a;l++){let u=i[l];a=x.valueFromInput(t,r)!=r.get(u)}n!==a&&o(a),n=a});function ri(t){let e=E(t),r=[];return e.has("model")&&r.push(e.get("model").expression),e.has("target")&&(r=r.concat(e.get("target").expression.split(",").map(i=>i.trim()))),r}b("model",({el:t,directive:e,component:r,cleanup:i})=>{let{expression:n,modifiers:s}=e;if(!n)return console.warn(`Raxm: [${T}model] is missing a value.`,t);if(nr(r,n))return console.warn(`Raxm: [${T}model="`+n+'"] property does not exist on component: ['+r.name+"]",t);if(t.type&&t.type.toLowerCase()==="file")return vt(t,n,r,i);x.setInputValueFromModel(t,r),ii(t,e,r)});function ii(t,e,r){let{expression:i,modifiers:n}=e;t.isRaxmModel=!0;let s=n.includes("live"),o=n.includes("lazy"),a=n.includes("defer"),l=n.includes("debounce");d.callHook("interceptRaxmModelAttachListener",e,t,r,i);let u=t.tagName==="SELECT"||["checkbox","radio"].includes(t.type)||o?"change":"input",g=((w,N,C)=>w?mt(N,C):N)(x.isTextInput(t)&&!l&&!o,w=>{let N=e.value,C=w.target,j=w instanceof CustomEvent&&typeof w.detail<"u"&&typeof window.document.documentMode>"u"?w.detail??w.target.value:x.valueFromInput(C,r);a?$(r,new G(N,j,C)):$(r,new G(N,j,C))},e.durationOr(150));t.addEventListener(u,g),r.addListenerForTeardown(()=>{t.removeEventListener(u,g)}),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&t.addEventListener("animationstart",w=>{w.animationName==="raxmautofill"&&(w.target.dispatchEvent(new Event("change",{bubbles:!0})),w.target.dispatchEvent(new Event("input",{bubbles:!0})))})}function nr(t,e){if(e.startsWith("$parent")){let i=closestComponent(t.el.parentElement,!1);return i?nr(i,e.split("$parent.")[1]):!0}let r=e.split(".")[0];return!Object.keys(t.serverMemo.data).includes(r)}b("init",({el:t,directive:e,component:r})=>{let i=e.value?e.method:"$refresh";$(r,new O(i,e.params,t))});b("poll",({el:t,directive:e,component:r})=>{let i=hi(e.modifiers,2e3),{start:n,pauseWhile:s,throttleWhile:o,stopWhen:a}=si(()=>{ni(t,e,r)},i);n(),o(()=>li()&&ci(e)),s(()=>ui(e)&&fi(t)),s(()=>di(t)),s(()=>ai()),a(()=>pi(t))});function ni(t,e,r){let i=e.method||"$refresh";$(r,new O(i,e.params,t))}function si(t,e=2e3){let r=[],i=[],n=[];return{start(){let s=oi(e,()=>{if(n.some(o=>o()))return s();r.some(o=>o())||i.some(o=>o())&&Math.random()<.95||t()})},pauseWhile(s){r.push(s)},throttleWhile(s){i.push(s)},stopWhen(s){n.push(s)}}}var K=[];function oi(t,e){if(!K[t]){let r={timer:setInterval(()=>r.callbacks.forEach(i=>i()),t),callbacks:new Set};K[t]=r}return K[t].callbacks.add(e),()=>{K[t].callbacks.delete(e),K[t].callbacks.size===0&&(clearInterval(K[t].timer),delete K[t])}}var We=!1;window.addEventListener("offline",()=>We=!0);window.addEventListener("online",()=>We=!1);function ai(){return We}var sr=!1;document.addEventListener("visibilitychange",()=>{sr=document.hidden},!1);function li(){return sr}function di(t){return!E(t).has("poll")}function ci(t){return!t.modifiers.includes("keep-alive")}function ui(t){return t.modifiers.includes("visible")}function fi(t){let e=t.getBoundingClientRect();return!(e.top<(window.innerHeight||document.documentElement.clientHeight)&&e.left<(window.innerWidth||document.documentElement.clientWidth)&&e.bottom>0&&e.right>0)}function pi(t){return t.isConnected===!1}function hi(t,e){let r,i=t.find(s=>s.match(/([0-9]+)ms/)),n=t.find(s=>s.match(/([0-9]+)s/));return i?r=Number(i.replace("ms","")):n&&(r=Number(n.replace("s",""))*1e3),r||e}var or={directive:b,start:_t,stop:$t,rescan:Nt,find:st,first:ot,getByName:at,all:lt,on:dt,trigger:ut,hook:ct};window.Raxm&&console.warn("Detected multiple instances of Raxm running");window.Alpine&&console.warn("Detected multiple instances of Alpine running");window.Raxm===void 0&&document.addEventListener("DOMContentLoaded",()=>{window.Raxm=or,or.start()});})();
